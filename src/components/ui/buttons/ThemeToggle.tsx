'use client';

import { storeAccessors } from '@/store/utils/storeAccessors/storeAccessors';
import { cn } from '@/lib/utils';
import { useTheme } from 'next-themes';

export const ThemeToggle = () => {
  const theme = storeAccessors.settings('theme');
  const setTheme = storeAccessors.settings('setTheme');
  const { resolvedTheme } = useTheme();

  const isDark = theme === 'dark' || resolvedTheme === 'dark';

  const toggleTheme = () => {
    const next = theme === 'dark' || resolvedTheme === 'dark' ? 'light' : 'dark';
    setTheme(next);
  };

  return (
    <button
      onClick={toggleTheme}
      className={cn(
        'w-15 h-8.5 rounded-full p-0.5 relative transition-all duration-500',
        isDark ? 'bg-blue-90 border border-blue-70' : 'bg-white border border-blue-50'
      )}
    >
      <div
        className={cn(
          'absolute top-0.5 left-0.5 w-7 h-7 rounded-full flex items-center justify-center transition-all duration-500 transform',
          isDark ? 'translate-x-6.5 bg-blue-70 ' : 'translate-x-0 bg-blue-50 text-white'
        )}
      >
        {isDark ? (
          <svg className="w-4 h-4" xmlns="http://www.w3.org/2000/svg" width="18" height="18" viewBox="0 0 18 18" fill="none">
            <path fillRule="evenodd" clipRule="evenodd" d="M8.3483 2.03745C8.5503 2.23947 8.62 2.5387 8.52804 2.80918C8.34798 3.3388 8.25 3.90724 8.25 4.50012C8.25 7.39961 10.6005 9.75012 13.5 9.75012C14.0928 9.75012 14.6611 9.65217 15.1907 9.47217C15.4612 9.38022 15.7604 9.44993 15.9624 9.65195C16.1644 9.85396 16.2341 10.1532 16.1421 10.4237C15.2376 13.0841 12.7185 14.9999 9.75 14.9999C6.02208 14.9999 3 11.9778 3 8.24992C3 5.28127 4.91594 2.76207 7.57658 1.85767C7.84707 1.76573 8.1463 1.83544 8.3483 2.03745ZM6.77429 3.92387C5.40008 4.87103 4.5 6.45595 4.5 8.24992C4.5 11.1494 6.85051 13.4999 9.75 13.4999C11.5439 13.4999 13.1287 12.5999 14.0759 11.2259C13.886 11.2419 13.6939 11.2501 13.5 11.2501C9.77208 11.2501 6.75 8.22804 6.75 4.50012C6.75 4.3061 6.7582 4.11391 6.77429 3.92387Z" fill="#132538"/>
          </svg>
        ) : (
          <svg className="w-4 h-4" xmlns="http://www.w3.org/2000/svg" width="19" height="18" viewBox="0 0 19 18" fill="none">
            <path fillRule="evenodd" clipRule="evenodd" d="M9.5 1.5C9.91421 1.5 10.25 1.83579 10.25 2.25V3.75C10.25 4.16421 9.91421 4.5 9.5 4.5C9.08579 4.5 8.75 4.16421 8.75 3.75V2.25C8.75 1.83579 9.08579 1.5 9.5 1.5ZM14.8032 3.69666C15.0961 3.98955 15.0961 4.46443 14.8032 4.75732L13.7425 5.81798C13.4496 6.11087 12.9747 6.11087 12.6818 5.81798C12.3889 5.52509 12.3889 5.05021 12.6818 4.75732L13.7425 3.69666C14.0354 3.40377 14.5103 3.40377 14.8032 3.69666ZM4.19668 3.69673C4.48958 3.40384 4.96445 3.40384 5.25734 3.69673L6.318 4.75739C6.6109 5.05028 6.6109 5.52516 6.318 5.81805C6.02511 6.11094 5.55024 6.11094 5.25734 5.81805L4.19668 4.75739C3.90379 4.4645 3.90379 3.98962 4.19668 3.69673ZM9.5 7.5C8.67157 7.5 8 8.17157 8 9C8 9.82843 8.67157 10.5 9.5 10.5C10.3284 10.5 11 9.82843 11 9C11 8.17157 10.3284 7.5 9.5 7.5ZM6.5 9C6.5 7.34315 7.84315 6 9.5 6C11.1569 6 12.5 7.34315 12.5 9C12.5 10.6569 11.1569 12 9.5 12C7.84315 12 6.5 10.6569 6.5 9ZM2 9C2 8.58579 2.33579 8.25 2.75 8.25H4.25C4.66421 8.25 5 8.58579 5 9C5 9.41421 4.66421 9.75 4.25 9.75H2.75C2.33579 9.75 2 9.41421 2 9ZM14 9C14 8.58579 14.3358 8.25 14.75 8.25H16.25C16.6642 8.25 17 8.58579 17 9C17 9.41421 16.6642 9.75 16.25 9.75H14.75C14.3358 9.75 14 9.41421 14 9ZM6.318 12.182C6.6109 12.4748 6.6109 12.9497 6.318 13.2426L5.25734 14.3033C4.96445 14.5962 4.48958 14.5962 4.19668 14.3033C3.90379 14.0104 3.90379 13.5355 4.19668 13.2426L5.25734 12.182C5.55024 11.8891 6.02511 11.8891 6.318 12.182ZM12.6818 12.182C12.9747 11.8891 13.4496 11.8891 13.7425 12.182L14.8032 13.2427C15.0961 13.5356 15.0961 14.0104 14.8032 14.3033C14.5103 14.5962 14.0354 14.5962 13.7425 14.3033L12.6818 13.2427C12.3889 12.9498 12.3889 12.4749 12.6818 12.182ZM9.5 13.5C9.91421 13.5 10.25 13.8358 10.25 14.25V15.75C10.25 16.1642 9.91421 16.5 9.5 16.5C9.08579 16.5 8.75 16.1642 8.75 15.75V14.25C8.75 13.8358 9.08579 13.5 9.5 13.5Z" fill="white"/>
          </svg>
        )}
      </div>
    </button>
  );
};
